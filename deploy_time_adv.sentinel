# This example is nearly identical to the deploy_time.txt file with one exception. Here I have decided to break the work_hours rule into two separate rules, beginning_of_work_day and end_of_work_day. This is just a simple and obvious example of how I can break my rules into more reusable pieces of code.

# "hour" is the time of the day in military time. In this example we set the time of the day to eight in the morning
hour = 8

# "day" is the day of the week. In this example the day of the week is Tuesday
day = "tuesday"

# "deploy_days" are the days we at JimCo are allowed to deploy our code to production. In this example we are only allowed to deploy our code on Monday, Tuesday, and Wednesday
deploy_days = ["monday", "tuesday", "wednesday"]

# "beginning_of_work_day" is a rule that checks to make sure that the hour we are running our code is after seven in the morning
beginning_of_work_day = rule {
  hour >= 7
}

# "end_of_work_day" is a rule that checks to make sure that the hour we are running our code is before six at night
end_of_work_day = rule {
  hour <= 18
}

# "work_hours" is a rule that makes sure we run our code within the work days we here have at JimCo. No running code at night when no one is around!
work_hours = rule {
  beginning_of_work_day and end_of_work_day
}

# This is our main sentinel rule. Here we are having our policy check that the hour we are deploying our code falls within JimCo working hours, and that the day that we are deploying is one of our deploy days
main = rule {
  work_hours and day in deploy_days
}
